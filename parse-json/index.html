<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">

    <link rel="icon" href="medicine.png" type="image/icon">
    <title>RecoverME Health</title>
</head>
<body>
    <div class="title">
        <img src="medicine.png" alt="RecoverME Health Logo" height="60px">
        <h1>PATIENT HEALTH INFORMATION</h1>
    </div>

    <table id="patient-data">
        <tr>
            <td id="table-header">Patient Name</td>
            <td id="name"></td>
        </tr>
        <tr>
            <td id="table-header">Organization</td>
            <td id="organization"></td>
        </tr>
        <tr>
            <td id="table-header">Gender</td>
            <td id="gender"></td>
        </tr>
        <tr>
            <td id="table-header">Number of Conditions</td>
            <td id="numberConditions"></td>
        </tr>
        <tr>
            <td id="table-header">List of Conditions</td>
            <td id="conditions"></td>
        </tr>
    </table>

    <script>
        fetch('patient.json')
            .then(response => response.json())
            .then()
            .then(data => {
                document.querySelector('#name').innerText = data.name[0].given + ' ' + data.name[0].family;
                document.querySelector('#organization').innerText = data.managingOrganization.display;
                document.querySelector('#gender').innerText = data.gender;
                document.querySelector('#numberConditions').innerText = data.conditions.length;
                document.querySelector('#conditions').innerHTML = data.conditions.toString().replace(/[,]+/g, ", ");
                // Alternative formatting, where each Condition is printed on it's own line
                // document.querySelector('#conditions').innerHTML = data.conditions.toString().replace(/[,]+/g, "<br />");
            })
    </script>
</body>
</html>